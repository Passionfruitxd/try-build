(this["webpackJsonp@uniswap/interface"]=this["webpackJsonp@uniswap/interface"]||[]).push([[5],{1552:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(var r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}},1571:function(e,t,n){},1572:function(e,t,n){},1573:function(e,t,n){},1574:function(e,t,n){},1575:function(e,t,n){},1622:function(e,t,n){"use strict";n.r(t),n.d(t,"BAG_WIDTH",(function(){return en})),n.d(t,"XXXL_BAG_WIDTH",(function(){return tn}));var r=n(20),c=n(2),i=n.n(c),a=n(14),o=n(10),s=n(4),l=n(3),u=n(54),d=n(42),b=n(33),p=n(17),j=n(170);var f=n(416),g=n(528),h=n(99),m=n(110),x=n(37),O=n(177),v=n(174),w=n(29),I=n(549),k=n(866),y=n(136),A=n(7),N=n(242);function E(){var e=Object(j.d)(j.b.payWithAnyToken,j.a.Enabled)===j.a.Enabled,t=Object(p.useWeb3React)().chainId;try{return t&&Object(N.UNIVERSAL_ROUTER_ADDRESS)(t),e}catch(n){return!1}}var T=n(102),S=n(374),C=n(194),P=n(203),R=n(428),_=n(697),z=n(5),F=n(870),L=n(867),D=n(0);var B=n(39),G=n(38);function M(e){return Object(s.a)(Object(s.a)({},{inputAmount:{amount:(n={inputAmount:e.inputAmount,outputAmount:e.outputAmount}).inputAmount.quotient.toString(),token:{address:n.inputAmount.currency.isToken?n.inputAmount.currency.address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",chainId:n.inputAmount.currency.chainId,decimals:n.inputAmount.currency.decimals,isNative:n.inputAmount.currency.isNative}},outputAmount:{amount:n.outputAmount.quotient.toString(),token:{address:n.outputAmount.currency.isToken?n.outputAmount.currency.address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",chainId:n.outputAmount.currency.chainId,decimals:n.outputAmount.currency.decimals,isNative:n.outputAmount.currency.isNative}}}),{},{pools:(t=e.route.pools,t.map((function(e){return function(e){var t="fee"in e;return{pair:t?void 0:{tokenAmountA:{amount:e.reserve0.quotient.toString(),token:{address:e.token0.address,chainId:e.token0.chainId,decimals:e.token0.decimals,isNative:e.token0.isNative}},tokenAmountB:{amount:e.reserve1.quotient.toString(),token:{address:e.token1.address,chainId:e.token1.chainId,decimals:e.token1.decimals,isNative:e.token1.isNative}}},pool:t?{fee:e.fee,liquidity:e.liquidity.toString(),sqrtRatioX96:e.sqrtRatioX96.toString(),tickCurrent:e.tickCurrent.toString(),tokenA:{address:e.token0.address,chainId:e.token0.chainId,decimals:e.token0.decimals,isNative:e.token0.isNative},tokenB:{address:e.token1.address,chainId:e.token1.chainId,decimals:e.token1.decimals,isNative:e.token1.isNative}}:void 0}}(e)})))});var t,n}var U=n(114),W=n.n(U),q=n(116),H=W()()(Object(q.devtools)((function(e){return{inputCurrency:void 0,tokenTradeInput:void 0,setInputCurrency:function(t){return e((function(){return{inputCurrency:t}}))},clearInputCurrency:function(){return e((function(){return{inputCurrency:void 0}}))},setTokenTradeInput:function(t){return e((function(){return{tokenTradeInput:t}}))}}}),{name:"useTokenInput"}));function V(e,t,n){var r=H((function(e){return e.setTokenTradeInput})),c=!!e&&e.routes,i=!!e&&!!e.inputAmount&&e.inputAmount.currency.isToken,a=!!n&&!!t;Object(D.useEffect)((function(){if(c&&i&&a){var o=parseInt(n.multiply(100).toSignificant(2)),s=function(e){var t,n=[],r=[],c=[],i=e.swaps,a=Object(B.a)(i);try{for(a.s();!(t=a.n()).done;){var o=t.value;o.route.protocol===G.Protocol.MIXED?n.push(M(o)):o.route.protocol===G.Protocol.V2?r.push(M(o)):c.push(M(o))}}catch(s){a.e(s)}finally{a.f()}return{mixedTokenTradeRouteInputs:n.length>0?n:void 0,v2TokenTradeRouteInputs:r.length>0?r:void 0,v3TokenTradeRouteInputs:c.length>0?c:void 0}}(e),l=s.mixedTokenTradeRouteInputs,u=s.v2TokenTradeRouteInputs,d=s.v3TokenTradeRouteInputs,b={mixedRoutes:l,tradeType:f.c.ExactOutput,v2Routes:u,v3Routes:d},p="permitSignature"in t&&t.permitSignature?{details:{amount:t.permitSignature.details.amount.toString(),expiration:t.permitSignature.details.expiration.toString(),nonce:t.permitSignature.details.nonce.toString(),token:t.permitSignature.details.token},sigDeadline:t.permitSignature.sigDeadline.toString(),signature:t.permitSignature.signature,spender:t.permitSignature.spender}:void 0;r({permit:p,routes:b,slippageToleranceBasisPoints:o,tokenAmount:{amount:e.inputAmount.quotient.toString(),token:{address:e.inputAmount.currency.address,chainId:e.inputAmount.currency.chainId,decimals:e.inputAmount.currency.decimals,isNative:e.inputAmount.currency.isNative}}})}else r(void 0)}),[t,n,a,i,c,r,e])}var Y=n(31);var X=n(172);function J(e){var t=Object(l.useTheme)();return Object(D.useMemo)((function(){var n=e?Object(X.a)(e):void 0,r=n?Object(X.b)(n):void 0,c="error"===r?t.accentCritical:"warning"===r?t.accentWarning:void 0;return n&&r&&c?{priceImpactSeverity:{type:r,color:c},displayPercentage:function(){return function(e){var t,n=e.lessThan(0)?"+":"";if(Number(e.numerator)/Number(e.denominator)*100<.005)return"0.00%";var r=parseFloat(null===(t=e.multiply(-1))||void 0===t?void 0:t.toFixed(2));return"".concat(n).concat(r,"%")}(n)}}:void 0}),[t.accentCritical,t.accentWarning,e])}var Q=n(702),$=n(47),K=n(298),Z=n(936),ee=n(691),te=n(100),ne=n(151),re=n(16),ce=n(548),ie=n(1552),ae=n.n(ie),oe=n(1),se=l.default.div.withConfig({componentId:"sc-rcepl8-0"})(["padding:0px 12px;"]),le=l.default.div.withConfig({componentId:"sc-rcepl8-1"})(["border-top:1px solid ",";color:",";display:flex;flex-direction:column;margin:0px 16px 8px;padding:12px 0px;border-bottom-left-radius:12px;border-bottom-right-radius:12px;"],(function(e){return e.theme.backgroundOutline}),(function(e){return e.theme.textPrimary})),ue=Object(l.default)(x.d).withConfig({componentId:"sc-rcepl8-2"})(["padding-top:8px;padding-bottom:",";"],(function(e){return e.usingPayWithAnyToken?"16px":"20px"})),de=Object(l.default)(w.d).withConfig({componentId:"sc-rcepl8-3"})(["justify-content:space-between;align-items:start;gap:8px;"]),be=Object(l.default)(x.d).withConfig({componentId:"sc-rcepl8-4"})(["text-align:end;overflow-x:hidden;"]),pe=Object(l.default)(Z.a).withConfig({componentId:"sc-rcepl8-5"})(["width:14px;margin-right:4px;color:inherit;"]),je=Object(l.default)(re.o.BodyPrimary).withConfig({componentId:"sc-rcepl8-6"})(["align-items:center;color:",";display:flex;justify-content:center;margin-bottom:10px !important;text-align:center;"],(function(e){return e.$color})),fe=Object(l.default)(re.o.Caption).withConfig({componentId:"sc-rcepl8-7"})(["color:",";display:flex;justify-content:center;text-align:center;margin-bottom:10px !important;"],(function(e){return e.$color})),ge=Object(l.default)(w.d).withConfig({componentId:"sc-rcepl8-8"})(["gap:8px;cursor:pointer;"]),he=l.default.button.withConfig({componentId:"sc-rcepl8-9"})(["display:flex;background:",";color:",";font-weight:600;line-height:24px;font-size:16px;gap:16px;justify-content:center;border:none;border-radius:12px;padding:12px 0px;cursor:pointer;align-items:center;&:disabled{opacity:0.6;cursor:auto;}"],(function(e){return e.$backgroundColor}),(function(e){return e.$color})),me=Object(l.default)(k.a).withConfig({componentId:"sc-rcepl8-10"})(["border-radius:4px;width:4rem;height:20px;align-self:end;"]),xe=Object(l.default)(w.d).withConfig({componentId:"sc-rcepl8-11"})(["align-items:center;gap:8px;width:100%;justify-content:flex-end;"]),Oe=Object(l.default)(w.d).withConfig({componentId:"sc-rcepl8-12"})(["align-items:center;gap:8px;"]),ve=Object(l.default)(re.o.BodyPrimary).withConfig({componentId:"sc-rcepl8-13"})(["line-height:20px;font-weight:500;overflow-x:hidden;text-overflow:ellipsis;white-space:nowrap;scrollbar-width:none;::-webkit-scrollbar{display:none;}"]),we=function(e){var t=e.disabled,n=e.children,r=e.onClick,c=e.backgroundColor,i=e.textColor;return Object(oe.jsx)(he,{disabled:t,onClick:r,$backgroundColor:c,$color:i,children:n})},Ie=function(e){var t=e.color,n=e.children;return n?Object(oe.jsxs)(je,{fontSize:"14px",lineHeight:"20px",$color:t,children:[Object(oe.jsx)(pe,{}),n]}):null},ke=function(e){var t=e.children,n=e.color;return t?Object(oe.jsx)(fe,{lineHeight:"16px",$color:n,children:t}):null},ye=function(e){var t,n=e.usingPayWithAnyToken,r=e.totalEthPrice,c=e.activeCurrency,i=e.tradeState,a=e.trade;return n?i===ne.b.LOADING?Object(oe.jsx)(re.o.BodyPrimary,{color:"textTertiary",lineHeight:"20px",fontWeight:"500",children:Object(oe.jsx)(oe.Fragment,{children:"Fetching price..."})}):Object(oe.jsx)(ve,{color:i===ne.b.SYNCING?"textTertiary":"textPrimary",children:Object(K.e)(null===a||void 0===a?void 0:a.inputAmount.toExact())}):Object(oe.jsxs)(re.o.BodyPrimary,{lineHeight:"20px",fontWeight:"500",children:[Object(K.l)(r.toString()),"\xa0",null!==(t=null===c||void 0===c?void 0:c.symbol)&&void 0!==t?t:"ETH"]})},Ae=function(e){var t=e.usdcValue,n=e.priceImpact,r=e.tradeState,c=e.usingPayWithAnyToken;return t?Object(oe.jsxs)(xe,{children:[n&&Object(oe.jsx)(oe.Fragment,{children:Object(oe.jsx)(y.a,{text:h.a._("The estimated difference between the USD values of input and output amounts."),children:Object(oe.jsxs)(Oe,{children:[Object(oe.jsx)(Z.a,{color:n.priceImpactSeverity.color,size:"16px"}),Object(oe.jsxs)(re.o.BodySmall,{style:{color:n.priceImpactSeverity.color},lineHeight:"20px",children:["(",Object(oe.jsx)(oe.Fragment,{children:n.displayPercentage()}),")"]})]})})}),Object(oe.jsx)(re.o.BodySmall,{color:"textTertiary",lineHeight:"20px",children:"".concat(Object(K.e)(null===t||void 0===t?void 0:t.toExact(),!0))})]}):!c||r!==ne.b.INVALID&&r!==ne.b.NO_ROUTE_FOUND?Object(oe.jsx)(me,{}):null},Ne=[$.b.FETCHING_ROUTE,$.b.CONFIRMING_IN_WALLET,$.b.FETCHING_FINAL_ROUTE,$.b.PROCESSING_TRANSACTION],Ee=function(e){var t,n=e.totalEthPrice,r=e.fetchAssets,c=e.eventProperties,u=Object(te.g)(),j=Object(l.useTheme)(),f=Object(p.useWeb3React)(),g=f.account,h=f.chainId,k=f.connector,y=Boolean(g&&h),B=E(),G=H((function(e){return e.inputCurrency})),M=H((function(e){return e.setInputCurrency})),U=Object(T.b)("ETH"),W=Object(P.e)(null!==g&&void 0!==g?g:void 0,G&&G.isToken?G:void 0),q=Object(_.a)((function(e){return{isLocked:e.isLocked,bagStatus:e.bagStatus,setBagExpanded:e.setBagExpanded,setBagStatus:e.setBagStatus}}),ae.a),X=q.isLocked,Z=q.bagStatus,ie=q.setBagExpanded,pe=q.setBagStatus,je=Object(D.useState)(!1),fe=Object(o.a)(je,2),he=fe[0],me=fe[1],xe=Ne.includes(Z),Oe=null!==G&&void 0!==G?G:U,ve=!!G&&B&&h===A.d.MAINNET,Ee=Object(D.useMemo)((function(){return Object(R.a)(Object(m.formatEther)(n.toString()),null!==U&&void 0!==U?U:void 0)}),[U,n]),Te=function(e,t){var n=Object(L.a)(z.TradeType.EXACT_OUTPUT,t,null!==e&&void 0!==e?e:void 0),r=n.state,c=n.trade,i=Object(F.a)(c),a=Object(D.useMemo)((function(){var e=null===c||void 0===c?void 0:c.maximumAmountIn(i);return(null===e||void 0===e?void 0:e.currency.isToken)?e:void 0}),[i,c]);return Object(D.useMemo)((function(){return{state:r,trade:c,maximumAmountIn:a,allowedSlippage:i}}),[i,a,r,c])}(ve?G:void 0,Ee),Se=Te.state,Ce=Te.trade,Pe=Te.maximumAmountIn,Re=Te.allowedSlippage,_e=function(e,t,n){var r=Object(p.useWeb3React)().chainId,c=Object(S.b)(n?null!==t&&void 0!==t?t:(null===e||void 0===e?void 0:e.currency.isToken)?e:void 0:void 0,n&&r?Object(N.UNIVERSAL_ROUTER_ADDRESS)(r):void 0),s=c.state===S.a.REQUIRED&&c.isApprovalLoading,l=Object(D.useState)(!1),u=Object(o.a)(l,2),j=u[0],f=u[1],g=Object(D.useCallback)(Object(a.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Y.default)(c.state===S.a.REQUIRED),f(!0),e.prev=2,e.next=5,c.approveAndPermit();case 5:Object(d.sendAnalyticsEvent)(b.InterfaceEventName.APPROVE_TOKEN_TXN_SUBMITTED,{chain_id:r,token_symbol:null===t||void 0===t?void 0:t.currency.symbol,token_address:null===t||void 0===t?void 0:t.currency.address}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:return e.prev=11,f(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])}))),[c,r,null===t||void 0===t?void 0:t.currency.address,null===t||void 0===t?void 0:t.currency.symbol]);return Object(D.useMemo)((function(){return{allowance:c,isApprovalLoading:s,isAllowancePending:j,updateAllowance:g}}),[c,j,s,g])}((null===Ce||void 0===Ce?void 0:Ce.inputAmount.currency.isToken)?null===Ce||void 0===Ce?void 0:Ce.inputAmount:void 0,Pe,B),ze=_e.allowance,Fe=_e.isAllowancePending,Le=_e.isApprovalLoading,De=_e.updateAllowance;V(Ce,ze,Re);var Be=J(Ce),Ge=Object(C.c)(null===Ce||void 0===Ce?void 0:Ce.inputAmount),Me=Object(C.c)(Ee),Ue=ve?Ge:Me,We=Object(Q.a)().balance,qe=Object(D.useMemo)((function(){if(y&&h===A.d.MAINNET){if(G){var e=null===Ce||void 0===Ce?void 0:Ce.inputAmount;if(!W||!e)return;return!W.lessThan(e)}return Object(m.parseEther)(We).gte(n)}}),[y,h,G,We,n,null===Ce||void 0===Ce?void 0:Ce.inputAmount,W]);Object(D.useEffect)((function(){pe($.b.ADDING_TO_BAG)}),[G,pe]);var He=Object(D.useMemo)((function(){var e=r,t=Object(oe.jsx)(oe.Fragment,{children:"Something went wrong"}),n=!0,c=void 0,i=j.accentWarning,a=void 0,o=j.textSecondary,s=j.accentAction,l=j.accentTextLightPrimary;return y&&h!==A.d.MAINNET?(e=function(){return Object(ce.a)(k,A.d.MAINNET)},t=Object(oe.jsx)(oe.Fragment,{children:"Switch networks"}),n=!1,c=Object(oe.jsx)(oe.Fragment,{children:"Wrong network"})):!1===qe?(t=Object(oe.jsx)(oe.Fragment,{children:"Pay"}),n=!0,c=Object(oe.jsx)(oe.Fragment,{children:"Insufficient funds"})):Z===$.b.WARNING?c=Object(oe.jsx)(oe.Fragment,{children:"Something went wrong. Please try again."}):y?Z===$.b.FETCHING_FINAL_ROUTE||Z===$.b.CONFIRMING_IN_WALLET?(n=!0,t=Object(oe.jsx)(oe.Fragment,{children:"Proceed in wallet"})):Z===$.b.PROCESSING_TRANSACTION?(n=!0,t=Object(oe.jsx)(oe.Fragment,{children:"Transaction pending"})):ve&&Se!==ne.b.VALID?(n=!0,t=Object(oe.jsx)(oe.Fragment,{children:"Fetching Route"}),Se===ne.b.INVALID&&(t=Object(oe.jsx)(oe.Fragment,{children:"Pay"})),Se===ne.b.NO_ROUTE_FOUND&&(t=Object(oe.jsx)(oe.Fragment,{children:"Insufficient liquidity"}),s=j.backgroundInteractive,l=j.textPrimary,a=Object(oe.jsx)(oe.Fragment,{children:"Insufficient pool liquidity to complete transaction"}))):ze.state===S.a.REQUIRED||ze.state===S.a.LOADING?(e=function(){return De()},n=Fe||Le||ze.state===S.a.LOADING,ze.state===S.a.LOADING?t=Object(oe.jsx)(oe.Fragment,{children:"Loading Allowance"}):Fe?t=Object(oe.jsx)(oe.Fragment,{children:"Approve in your wallet"}):Le?t=Object(oe.jsx)(oe.Fragment,{children:"Approval pending"}):(a=Object(oe.jsx)(oe.Fragment,{children:"An approval is needed to use this token. "}),t=Object(oe.jsx)(oe.Fragment,{children:"Approve"}))):Z===$.b.CONFIRM_QUOTE?(n=!1,i=j.accentAction,c=Object(oe.jsx)(oe.Fragment,{children:"Price updated"}),t=Object(oe.jsx)(oe.Fragment,{children:"Pay"})):Be&&"error"===Be.priceImpactSeverity.type?(n=!1,s=Be.priceImpactSeverity.color,a=Object(oe.jsx)(oe.Fragment,{children:"Price impact warning"}),o=Be.priceImpactSeverity.color,t=Object(oe.jsx)(oe.Fragment,{children:"Pay Anyway"})):!0===qe&&(n=!1,t=Object(oe.jsx)(oe.Fragment,{children:"Pay"}),a=ve?Object(oe.jsx)(oe.Fragment,{children:"Refunds for unavailable items will be given in ETH"}):void 0):(e=function(){u(),ie({bagExpanded:!1})},n=!1,t=Object(oe.jsx)(oe.Fragment,{children:"Connect wallet"})),{buttonText:t,buttonTextColor:l,disabled:n,warningText:c,warningTextColor:i,helperText:a,helperTextColor:o,handleClick:e,buttonColor:s}}),[r,j.accentWarning,j.textSecondary,j.accentAction,j.accentTextLightPrimary,j.backgroundInteractive,j.textPrimary,y,h,qe,Z,ve,Se,ze.state,Be,k,u,ie,Fe,Le,De]),Ve=He.buttonText,Ye=He.buttonTextColor,Xe=He.disabled,Je=He.warningText,Qe=He.warningTextColor,$e=He.helperText,Ke=He.helperTextColor,Ze=He.handleClick,et=He.buttonColor,tt=Object(s.a)({usd_value:null===Ue||void 0===Ue?void 0:Ue.toExact(),using_erc20:!!G},c);return console.log(Z),Object(oe.jsxs)(se,{children:[Object(oe.jsxs)(le,{children:[B&&Object(oe.jsxs)(ue,{gap:"xs",usingPayWithAnyToken:B,children:[Object(oe.jsxs)(de,{children:[Object(oe.jsxs)(x.d,{gap:"xs",children:[Object(oe.jsx)(re.o.SubHeaderSmall,{children:Object(oe.jsx)(oe.Fragment,{children:"Pay with"})}),Object(oe.jsxs)(ge,{onClick:function(){X||(me(!0),Object(d.sendAnalyticsEvent)(b.NFTEventName.NFT_BUY_TOKEN_SELECTOR_CLICKED))},children:[Object(oe.jsx)(v.a,{currency:Oe,size:"24px"}),Object(oe.jsx)(re.o.HeadlineSmall,{fontWeight:500,lineHeight:"24px",children:null===Oe||void 0===Oe?void 0:Oe.symbol}),Object(oe.jsx)(ee.a,{size:20,color:j.textSecondary})]})]}),Object(oe.jsxs)(be,{gap:"xs",children:[Object(oe.jsx)(re.o.SubHeaderSmall,{marginBottom:"4px",children:Object(oe.jsx)(oe.Fragment,{children:"Total"})}),Object(oe.jsx)(ye,{usingPayWithAnyToken:ve,totalEthPrice:n,activeCurrency:Oe,tradeState:Se,trade:Ce})]})]}),Object(oe.jsx)(Ae,{usdcValue:Ue,priceImpact:Be,tradeState:Se,usingPayWithAnyToken:ve})]}),!B&&Object(oe.jsxs)(ue,{gap:"xs",children:[Object(oe.jsxs)(w.d,{justify:"space-between",children:[Object(oe.jsx)("div",{children:Object(oe.jsx)(re.o.HeadlineSmall,{children:"Total"})}),Object(oe.jsx)("div",{children:Object(oe.jsxs)(re.o.HeadlineSmall,{children:[Object(K.l)(n.toString()),"\xa0",null!==(t=null===Oe||void 0===Oe?void 0:Oe.symbol)&&void 0!==t?t:"ETH"]})})]}),Object(oe.jsx)(Ae,{usdcValue:Ue,priceImpact:Be,tradeState:Se,usingPayWithAnyToken:ve})]}),Object(oe.jsxs)(d.TraceEvent,{events:[b.BrowserEvent.onClick],name:b.NFTEventName.NFT_BUY_BAG_PAY,element:b.InterfaceElementName.NFT_BUY_BAG_PAY_BUTTON,properties:Object(s.a)({},tt),shouldLogImpression:y&&!Xe,children:[Object(oe.jsx)(Ie,{color:Qe,children:Je}),Object(oe.jsx)(ke,{color:Ke,children:$e}),Object(oe.jsxs)(we,{onClick:Ze,disabled:Xe||xe,backgroundColor:et,textColor:Ye,children:[xe&&Object(oe.jsx)(O.a,{size:"20px",stroke:"white"}),Ve]})]})]}),Object(oe.jsx)(I.a,{isOpen:he,onDismiss:function(){return me(!1)},onCurrencySelect:function(e){M(e.isNative?void 0:e),e.isToken&&Object(d.sendAnalyticsEvent)(b.NFTEventName.NFT_BUY_TOKEN_SELECTED,{token_address:e.address,token_symbol:e.symbol})},selectedCurrency:null!==Oe&&void 0!==Oe?Oe:void 0,onlyShowCurrenciesWithBalance:!0})]})},Te=n(202),Se=n(406),Ce=n(405),Pe=n(608),Re=n(81),_e=n(255),ze=n(430),Fe=n(699),Le=n(263),De=n(431),Be=n(57),Ge=n(512),Me=n(1560),Ue=n(1380),We=n(145),qe=Object(l.default)(x.d).withConfig({componentId:"sc-1e2ctc1-0"})(["position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);width:420px;z-index:",";background:",";border-radius:20px;border:1px solid ",";box-shadow:",";padding:20px 24px 24px;display:flex;flex-direction:column;gap:12px;@media screen and (max-width:","px){width:100%;}"],We.a.modal,(function(e){return e.theme.backgroundSurface}),(function(e){return e.theme.backgroundOutline}),(function(e){return e.theme.deepShadow}),re.a.sm),He=l.default.div.withConfig({componentId:"sc-1e2ctc1-1"})(["display:flex;width:100%;justify-content:flex-end;"]),Ve=Object(l.default)(Ue.a).withConfig({componentId:"sc-1e2ctc1-2"})(["cursor:pointer;&:hover{opacity:0.6;}"]),Ye=l.default.div.withConfig({componentId:"sc-1e2ctc1-3"})(["display:flex;width:100%;justify-content:center;align-items:center;padding:32px 120px;"]),Xe=Object(l.default)(Be.h).withConfig({componentId:"sc-1e2ctc1-4"})(["font-weight:600;font-size:20px;line-height:24px;margin-top:12px;"]),Je=l.default.span.withConfig({componentId:"sc-1e2ctc1-5"})(["font-weight:600;font-size:16px;line-height:20px;color:",";text-align:center;cursor:pointer;padding:12px 16px;&:hover{opacity:0.6;}"],(function(e){return e.theme.accentAction})),Qe=function(e){var t,n,r=e.listingsBelowFloor,c=e.closeModal,i=e.startListing,a=Object(l.useTheme)();return Object(oe.jsxs)(Ge.a,{children:[Object(oe.jsxs)(qe,{children:[Object(oe.jsxs)(He,{children:[Object(oe.jsx)(Ve,{width:24,height:24,onClick:c})," "]}),Object(oe.jsx)(Ye,{children:Object(oe.jsx)(Z.a,{height:90,width:90,color:a.accentCritical})}),Object(oe.jsx)(re.o.HeadlineSmall,{lineHeight:"28px",textAlign:"center",children:Object(oe.jsx)(oe.Fragment,{children:"Low listing price"})}),Object(oe.jsxs)(re.o.BodyPrimary,{textAlign:"center",children:[Object(oe.jsx)(De.b,{id:"{0, plural, =1 {{1}} other {{2}}}",values:{0:1!==r.length?2:1,1:h.a._("One NFT is listed {0}%",{0:(100*(1-(null!==(t=r[0][1].price)&&void 0!==t?t:0)/(null!==(n=r[0][0].floorPrice)&&void 0!==n?n:0))).toFixed(0)}),2:h.a._("{0} NFTs are listed significantly",{0:r.length})}}),"\xa0",Object(oe.jsx)(oe.Fragment,{children:"below the collection\u2019s floor price. Are you sure you want to continue?"})]}),Object(oe.jsx)(Xe,{onClick:function(e){e.preventDefault(),e.stopPropagation(),i(),c()},children:Object(oe.jsx)(oe.Fragment,{children:"Continue"})}),Object(oe.jsx)(Je,{onClick:c,children:Object(oe.jsx)(oe.Fragment,{children:"Edit listings"})})]}),Object(oe.jsx)(Me.a,{onClick:c})]})},$e=(n(404),n(1571),"rgw6ez2cw rgw6ez2d9 rgw6ez2ie rgw6ez2ir rgw6ez2nq rgw6ez2o9 rgw6ez278 rgw6ez27r rgw6ez45e rgw6ezd2 rgw6ezb2 rgw6ezb9 rgw6eze8 rgw6ezef rgw6ez43w rgw6ez3k rgw6ez46q rgw6ez4w rgw6ez7c2"),Ke=n(506),Ze=n(233),et=n(704),tt=function(e){var t=e.listing,n=e.newStatus,c=e.rows,i=e.setRows,a=e.callback,o=Object(r.a)(c),s=c.findIndex((function(e){return e===t}));t.status=n,a&&(t.callback=a),o[s]=t,i(o)};function nt(e,t,n,r){return rt.apply(this,arguments)}function rt(){return(rt=Object(a.a)(i.a.mark((function e(t,n,r,c){var a,o,s,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(){return nt(t,n,r,c)},r(t,$.c.SIGNING,a),o=t.marketplace,s=t.collectionAddress,l=Ke.b[Ke.a.MAINNET],u="OpenSea"===o.name?Ze.b:"Rarible"===o.name?ze.a:"X2Y2"===o.name?ze.c:l.TRANSFER_MANAGER_ERC721,e.t0=!!s,!e.t0){e.next=9;break}return e.next=9,Object(et.b)(u,s,n,(function(e){return r(t,e,a)}));case 9:t.status!==$.c.REJECTED&&t.status!==$.c.FAILED||!c||c();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(e,t,n,r,c,i,a){return it.apply(this,arguments)}function it(){return(it=Object(a.a)(i.a.mark((function e(t,n,r,c,a,o,s){var l,u,d,b,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=c(),u=function(){return ct(t,n,r,c,a,o,s)},o(t,$.c.SIGNING,u),d=t.asset,b=t.marketplace,e.next=6,Object(et.c)(b,d,n,r,l,(function(e){return o(t,e,u)}));case 6:p=e.sent,t.status===$.c.REJECTED&&s?s():p&&"LooksRare"===t.marketplace.name&&a(l+1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var at=function(e){return e!==$.c.PAUSED&&e!==$.c.APPROVED},ot=function(e,t,n){e.status!==$.c.PENDING&&e.status!==$.c.DEFINED||tt({listing:e,newStatus:$.c.PAUSED,rows:t,setRows:n})},st=function(e,t,n){e.status!==$.c.PAUSED&&e.status!==$.c.FAILED&&e.status!==$.c.REJECTED||tt({listing:e,newStatus:$.c.DEFINED,rows:t,setRows:n})},lt=function(e){var t=e.onClick,n=e.buttonText,r=e.showWarningOverride,c=void 0!==r&&r,i=Object(_e.e)((function(e){return{addMarketplaceWarning:e.addMarketplaceWarning,sellAssets:e.sellAssets,removeAllMarketplaceWarnings:e.removeAllMarketplaceWarnings,showResolveIssues:e.showResolveIssues,toggleShowResolveIssues:e.toggleShowResolveIssues,issues:e.issues,setIssues:e.setIssues}}),ae.a),a=i.addMarketplaceWarning,s=i.sellAssets,u=i.removeAllMarketplaceWarnings,d=i.showResolveIssues,b=i.toggleShowResolveIssues,p=i.issues,j=i.setIssues,f=Object(_e.c)((function(e){return{listingStatus:e.listingStatus,setListingStatus:e.setListingStatus,setListings:e.setListings,setCollectionsRequiringApproval:e.setCollectionsRequiringApproval}}),ae.a),g=f.listingStatus,m=f.setListingStatus,x=f.setListings,O=f.setCollectionsRequiringApproval,v=Object(D.useState)(!1),w=Object(o.a)(v,2),I=w[0],k=w[1],y=Object(D.useState)(!1),A=Object(o.a)(y,2),N=A[0],E=A[1],T=Object(l.useTheme)();Object(D.useEffect)((function(){var e=function(e){var t=[],n=[];return e.forEach((function(e){var r;null===(r=e.marketplaces)||void 0===r||r.forEach((function(r){var c,i,a={images:[e.smallImageUrl,r.icon],name:e.name||"#".concat(e.tokenId),status:$.c.DEFINED,asset:e,marketplace:r,price:null===(c=e.newListings)||void 0===c||null===(i=c.find((function(e){return e.marketplace.name===r.name})))||void 0===i?void 0:i.price};if(n.push(a),!t.some((function(t){return t.collectionAddress===e.asset_contract.address&&t.marketplace.name===r.name}))){var o={images:[e.asset_contract.image_url,r.icon],name:e.asset_contract.name,status:$.c.DEFINED,collectionAddress:e.asset_contract.address,isVerified:e.collectionIsVerified,marketplace:r};t.push(o)}}))})),[t,n]}(s),t=Object(o.a)(e,2),n=t[0],r=t[1];x(r),O(n),m($.c.DEFINED)}),[s]);var S=Object(D.useMemo)((function(){var e,t=s.some((function(e){return void 0===e.marketplaces})),n=s.some((function(e){return null!=e.expirationTime&&(isNaN(e.expirationTime)||1e3*e.expirationTime-Date.now()<6e4)})),r=s.some((function(e){return null!=e.expirationTime&&isNaN(e.expirationTime)})),c=s.some((function(e){return null!=e.expirationTime&&1e3*e.expirationTime-Date.now()>15552e6})),i=[],a=[],o=[],l=[],u=Object(B.a)(s);try{for(u.s();!(e=u.n()).done;){var p=e.value;if(p.newListings){var f,g=Object(B.a)(p.newListings);try{for(g.s();!(f=g.n()).done;){var h,m=f.value;m.price?isNaN(m.price)||m.price<0?l.push([p,m]):m.price<.8*(null!==(h=null===p||void 0===p?void 0:p.floorPrice)&&void 0!==h?h:0)&&!m.overrideFloorPrice?a.push([p,m]):p.floor_sell_order_price&&m.price>=p.floor_sell_order_price&&o.push([p,m]):i.push([p,m])}}catch(v){g.e(v)}finally{g.f()}}}}catch(v){u.e(v)}finally{u.f()}var x=Number(n)+Number(c)+i.length+o.length;j(x),!x&&d&&b(),(n||c||o.length)&&!d&&b();var O=0===a.length&&0===o.length;return E(O),[t,n,r,c,i,a,o,l]}),[s,j,d,b]),C=Object(o.a)(S,8),P=C[0],R=C[1],_=C[2],z=C[3],F=C[4],L=C[5],G=C[6],M=C[7],U=Object(D.useMemo)((function(){return[P||R||_||z||M.length>0||F.length>0,P?"No marketplaces selected":R?"Set duration":_?"Invalid duration":z?"Max duration is 6 months":F.length>0?"".concat(F.length," item price").concat(Object(Le.a)(F.length)," not set"):M.length>0?"".concat(M.length," price").concat(Object(Le.a)(M.length)," are invalid"):L.length>0?"".concat(L.length," item").concat(Object(Le.a)(L.length)," listed below floor"):G.length>0?"".concat(G.length," item").concat(Object(Le.a)(G.length)," already listed"):""]}),[P,R,_,z,F,M,L,G]),W=Object(o.a)(U,2),q=W[0],H=W[1];Object(D.useEffect)((function(){k(!1)}),[H]);var V=function(){!q&&N||c?p?!d&&b():L.length?k(!0):t():function(){if(u(),!R&&!P)if(F.length>0){var e,t=Object(B.a)(F);try{for(t.s();!(e=t.n()).done;){var n=Object(o.a)(e.value,2),r=n[0],c=n[1];a(r,{message:"PLEASE SET A PRICE",marketplace:c.marketplace})}}catch(p){t.e(p)}finally{t.f()}}else if(M.length>0){var i,s=Object(B.a)(M);try{for(s.s();!(i=s.n()).done;){var l=Object(o.a)(i.value,2),d=l[0],b=l[1];!b.overrideFloorPrice&&a(d,{message:"INVALID PRICE",marketplace:b.marketplace})}}catch(p){s.e(p)}finally{s.f()}}k(!0)}()};return Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(Te.a,{position:"relative",children:Object(oe.jsx)(Te.a,{as:"button",border:"none",backgroundColor:d?"accentFailure":"accentAction",cursor:[$.c.APPROVED,$.c.PENDING,$.c.SIGNING].includes(g)||q?"default":"pointer",className:$e,onClick:function(){return g!==$.c.APPROVED&&V()},type:"button",style:{color:d?T.accentTextLightPrimary:T.white,opacity:![$.c.DEFINED,$.c.FAILED,$.c.CONTINUE].includes(g)||q&&!d?.3:1},children:g===$.c.SIGNING?Object(oe.jsx)(oe.Fragment,{children:"Proceed in wallet"}):g===$.c.PENDING?Object(oe.jsx)(oe.Fragment,{children:"Pending"}):g===$.c.APPROVED?Object(oe.jsx)(oe.Fragment,{children:"Complete!"}):g===$.c.PAUSED?Object(oe.jsx)(oe.Fragment,{children:"Paused"}):g===$.c.FAILED?Object(oe.jsx)(oe.Fragment,{children:"Try again"}):g===$.c.CONTINUE?Object(oe.jsx)(oe.Fragment,{children:"Continue"}):d?Object(oe.jsx)(De.b,{id:"{0, plural, =1 {Resolve issue} other {{1}}}",values:{0:1!==p?2:1,1:h.a._("Resolve {issues} issues",{issues:p})}}):n})}),I&&Object(oe.jsx)(Qe,{listingsBelowFloor:L,closeModal:function(){return k(!1)},startListing:t})]})},ut=n(56),dt=n(698),bt=function(e){var t=e.sectionTitle,n=e.caption,r=void 0===n?void 0:n,c=e.title,s=void 0===c?void 0:c,l=e.rows,u=e.index,d=e.openIndex,b=e.isSuccessScreen,p=void 0!==b&&b,j=Object(D.useState)(!1),f=Object(o.a)(j,2),g=f[0],h=f[1],m=l.some((function(e){return e.status!==$.c.APPROVED})),x=Object(_e.e)((function(e){return e.sellAssets})),O=Object(_e.e)((function(e){return e.removeAssetMarketplace})),v=function(e){if(1===u){var t,n=Object(B.a)(x);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.asset_contract.address===e.collectionAddress&&O(r,e.marketplace)}}catch(c){n.e(c)}finally{n.f()}}else O(e.asset,e.marketplace)};function w(e){var t,n,r=e,c=r.asset.newListings;return null!==(t=null===c||void 0===c||null===(n=c.find((function(e){return e.marketplace.name===r.marketplace.name})))||void 0===n?void 0:n.price)&&void 0!==t?t:0}Object(D.useEffect)((function(){h(u===d)}),[u,d]);var I=!m&&l.length>0&&!p;return Object(oe.jsxs)(Se.c,{flexWrap:"wrap",className:Pe.i,marginTop:"10",marginBottom:"10",onClick:function(){return l.length>0&&h(!g)},color:I?"accentSuccess":"textPrimary",children:[I&&Object(oe.jsx)(Ce.a,{style:{marginRight:"8px"}}),t,!p&&Object(oe.jsx)(Ce.j,{className:Object(ut.default)("".concat(g?"":"_13bxg42"," ").concat("rgw6ez19q rgw6ez12w rgw6ez7p6 rgw6ezpw rgw6ezq8"))}),(g||p)&&Object(oe.jsxs)(Se.b,{gap:"12",width:"full",paddingTop:p?"28":"auto",className:Object(ut.default)(!p&&"rgw6ez2t2 rgw6ez7bu rgw6ez50k rgw6ez7au rgw6ez7ka"),children:[r&&Object(oe.jsx)(Te.a,{color:"textPrimary",fontWeight:"normal",className:r,children:r}),s&&Object(oe.jsx)(Te.a,{color:"textSecondary",className:Pe.a,children:s}),Object(oe.jsx)(Se.b,{gap:"8",children:l.map((function(e,t){var n,r;return Object(oe.jsxs)(Se.b,{gap:"8",children:[Object(oe.jsxs)(Se.c,{children:[null===(n=e.images)||void 0===n?void 0:n.map((function(t,n){return Object(oe.jsx)(Te.a,{as:"img",height:"20",width:"20",borderRadius:0===n&&e.collectionAddress?"round":"4",style:{zIndex:2-n},className:"_13bxg48 rgw6ez7ka rgw6ez7au rgw6ez50q",src:t,alt:e.name},n)})),Object(oe.jsx)(Te.a,{marginLeft:"8",marginRight:"auto",fontWeight:"normal",color:"textPrimary",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:{sm:"max",md:e.status===$.c.REJECTED||e.status===$.c.FAILED?"120":"full"},className:Pe.c,children:e.name}),p?w(e)&&"".concat(Object(dt.b)(Object(dt.f)(null!==(r=w(e))&&void 0!==r?r:0).toString())," ETH"):e.status===$.c.APPROVED?Object(oe.jsx)(Ce.a,{height:"20",width:"20"}):e.status===$.c.FAILED||e.status===$.c.REJECTED?Object(oe.jsxs)(Se.c,{gap:"4",children:[Object(oe.jsx)(Te.a,{fontWeight:"normal",fontSize:"14",color:"textSecondary",children:e.status}),Object(oe.jsx)(Ce.m,{})]}):e.status===$.c.SIGNING&&Object(oe.jsx)(Ce.p,{height:"20",width:"20",stroke:"#4673FA"})]}),(e.status===$.c.FAILED||e.status===$.c.REJECTED)&&Object(oe.jsxs)(Se.c,{gap:"8",justifyContent:"center",children:[Object(oe.jsx)(Te.a,{width:"120",as:"button",className:Pe.e,borderRadius:"12",border:"none",color:"red400",height:"32",cursor:"pointer",style:{backgroundColor:"#FA2B391A"},onClick:function(){var t=Object(a.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.stopPropagation(),v(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Remove"}),Object(oe.jsx)(Te.a,{width:"120",as:"button",className:Pe.e,borderRadius:"12",border:"none",color:"accentAction",height:"32",cursor:"pointer",style:{backgroundColor:"#4C82FB29"},onClick:function(){var t=Object(a.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.stopPropagation(),!e.callback){t.next=4;break}return t.next=4,e.callback();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Try again"})]})]},t)}))})]})]})},pt=function(){var e=Object(p.useWeb3React)().provider,t=Object(_e.e)((function(e){return e.sellAssets})),n=Object(_e.c)((function(e){return{listingStatus:e.listingStatus,setListingStatus:e.setListingStatus,setListings:e.setListings,setCollectionsRequiringApproval:e.setCollectionsRequiringApproval,setListingStatusAndCallback:e.setListingStatusAndCallback,setCollectionStatusAndCallback:e.setCollectionStatusAndCallback,looksRareNonce:e.looksRareNonce,setLooksRareNonce:e.setLooksRareNonce,getLooksRareNonce:e.getLooksRareNonce,collectionsRequiringApproval:e.collectionsRequiringApproval,listings:e.listings}}),ae.a),r=n.listingStatus,c=n.setListingStatus,l=n.setListings,u=n.setCollectionsRequiringApproval,j=n.setListingStatusAndCallback,f=n.setCollectionStatusAndCallback,g=n.looksRareNonce,h=n.setLooksRareNonce,m=n.getLooksRareNonce,x=n.collectionsRequiringApproval,O=n.listings,v=null===e||void 0===e?void 0:e.getSigner(),w=Object(D.useState)(0),I=Object(o.a)(w,2),k=I[0],y=I[1],A=Object(D.useState)(!1),N=Object(o.a)(A,2),E=N[0],T=N[1],S=Object(_e.a)((function(e){return e.toggleBag})),C=Object(D.useRef)(g),P=Object(_e.b)(),R=Object(d.useTrace)({modal:b.InterfaceModalName.NFT_LISTING});Object(D.useEffect)((function(){_e.c.subscribe((function(e){return C.current=e.looksRareNonce}))}),[]);var _=Object(D.useMemo)((function(){return function(e){var t=e.reduce((function(e,t){var n;if(null===(n=t.newListings)||void 0===n?void 0:n.length){var r,c,i,a=t.newListings.reduce((function(e,t){var n,r;return(null!==(n=e.price)&&void 0!==n?n:0)>(null!==(r=t.price)&&void 0!==r?r:0)?e:t})),o=a.marketplace.fee+("LooksRare"===a.marketplace.name?et.a:null!==(r=null===t||void 0===t?void 0:t.basisPoints)&&void 0!==r?r:0)/100;return e+(null!==(c=a.price)&&void 0!==c?c:0)-(null!==(i=a.price)&&void 0!==i?i:0)*(o/100)}return e}),0);return t?Math.round(1e4*t+Number.EPSILON)/1e4:0}(t)}),[t]),z=Object(D.useState)(0),F=Object(o.a)(z,2),L=F[0],G=F[1];Object(D.useEffect)((function(){Object(Fe.a)().then((function(e){G(e||0)}))}),[]);var M=Object(s.a)({collection_addresses:t.map((function(e){return e.asset_contract.address})),token_ids:t.map((function(e){return e.tokenId})),marketplaces:Array.from(new Set(O.map((function(e){return e.marketplace.name})))),list_quantity:O.length,usd_value:L*_},R);Object(D.useEffect)((function(){(null===x||void 0===x?void 0:x.length)&&T(x.every((function(e){return e.status===$.c.APPROVED}))),!E||r!==$.c.PENDING&&r!==$.c.CONTINUE&&r!==$.c.SIGNING||(Y(),H())}),[x,E]);var U=Object(D.useMemo)((function(){return x.every((function(e){return e.status===$.c.APPROVED||e.status===$.c.PAUSED}))}),[x]),W=Object(D.useMemo)((function(){return O.every((function(e){return e.status===$.c.APPROVED||e.status===$.c.PAUSED}))}),[O]);Object(D.useEffect)((function(){r===$.c.SIGNING&&U&&W&&Y()}),[U,W]);var q=function(){var e=Object(a.a)(i.a.mark((function e(){var t,n,r,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}return e.abrupt("return");case 2:return Object(d.sendAnalyticsEvent)(b.NFTEventName.NFT_SELL_START_LISTING,Object(s.a)({},M)),c($.c.SIGNING),e.next=6,v.getAddress();case 6:return t=e.sent,e.next=9,Object(ze.h)(t);case 9:n=e.sent,h(null!==n&&void 0!==n?n:0),(null===x||void 0===x?void 0:x.some((function(e){return e.status===$.c.PAUSED})))||(c($.c.SIGNING),y(1)),r=Object(B.a)(x),e.prev=13,r.s();case 15:if((a=r.n()).done){e.next=27;break}if(o=a.value,e.t0=at(o.status),!e.t0){e.next=25;break}if(!P){e.next=24;break}return e.next=22,nt(o,v,f,V);case 22:e.next=25;break;case 24:nt(o,v,f,V);case 25:e.next=15;break;case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(13),r.e(e.t1);case 32:return e.prev=32,r.f(),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[13,29,32,35]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var t=Object(a.a)(i.a.mark((function t(){var n,r,a,o,l,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v&&e){t.next=2;break}return t.abrupt("return");case 2:c($.c.SIGNING),y(2),r=Object(B.a)(O),t.prev=5,r.s();case 7:if((a=r.n()).done){t.next=15;break}if(o=a.value,t.t0=at(o.status),!t.t0){t.next=13;break}return t.next=13,ct(o,v,e,m,h,j,V);case 13:t.next=7;break;case 15:t.next=20;break;case 17:t.prev=17,t.t1=t.catch(5),r.e(t.t1);case 20:return t.prev=20,r.f(),t.finish(20);case 23:return l=O.every((function(e){return e.status===$.c.APPROVED})),u=O.some((function(e){return e.status===$.c.PAUSED})),l?(y(0),c($.c.APPROVED)):u||c($.c.FAILED),Object(d.sendAnalyticsEvent)(b.NFTEventName.NFT_LISTING_COMPLETED,Object(s.a)({signatures_approved:O.filter((function(e){return e.status===$.c.APPROVED})),list_quantity:O.length,usd_value:L*_},R)),t.t2=ze.g,t.t3=O,t.next=31,null===v||void 0===v?void 0:v.getAddress();case 31:if(t.t5=n=t.sent,t.t4=null!==t.t5,!t.t4){t.next=35;break}t.t4=void 0!==n;case 35:if(!t.t4){t.next=39;break}t.t6=n,t.next=40;break;case 39:t.t6="";case 40:return t.t7=t.t6,t.next=43,(0,t.t2)(t.t3,t.t7);case 43:case"end":return t.stop()}}),t,null,[[5,17,20,23]])})));return function(){return t.apply(this,arguments)}}(),V=function(){var e,t=Object(B.a)(x);try{for(t.s();!(e=t.n()).done;){var n=e.value;ot(n,x,u)}}catch(a){t.e(a)}finally{t.f()}var r,c=Object(B.a)(O);try{for(c.s();!(r=c.n()).done;){var i=r.value;ot(i,O,l)}}catch(a){c.e(a)}finally{c.f()}},Y=function(){var e,t=Object(B.a)(x);try{for(t.s();!(e=t.n()).done;){var n=e.value;st(n,x,u)}}catch(a){t.e(a)}finally{t.f()}var r,c=Object(B.a)(O);try{for(c.s();!(r=c.n()).done;){var i=r.value;st(i,O,l)}}catch(a){c.e(a)}finally{c.f()}},X=Object(D.useMemo)((function(){return r===$.c.APPROVED}),[r]);return Object(oe.jsx)(d.Trace,{modal:b.InterfaceModalName.NFT_LISTING,children:Object(oe.jsxs)(Se.b,{paddingTop:"20",paddingBottom:"20",paddingLeft:"12",paddingRight:"12",children:[Object(oe.jsxs)(Se.c,{className:Pe.h,marginBottom:"10",children:[P&&!X&&Object(oe.jsx)(Te.a,{paddingTop:"4",marginRight:"4",onClick:S,children:Object(oe.jsx)(Ce.g,{height:28,width:28})}),X?"Success!":"Listing ".concat(t.length," NFTs"),Object(oe.jsx)(Te.a,{as:"button",border:"none",color:"textSecondary",backgroundColor:"backgroundSurface",marginLeft:"auto",marginRight:"0",paddingRight:"0",display:{sm:"flex",md:"none"},cursor:"pointer",onClick:S,children:Object(oe.jsx)(Ce.C,{height:28,width:28,fill:Re.b.colors.textPrimary})})]}),Object(oe.jsx)(Se.b,{overflowX:"hidden",overflowY:"auto",style:{maxHeight:"60vh"},children:X?Object(oe.jsx)(d.Trace,{name:b.NFTEventName.NFT_LISTING_COMPLETED,properties:Object(s.a)({list_quantity:O.length,usd_value:L*_},R),shouldLogImpression:!0,children:Object(oe.jsx)(bt,{sectionTitle:"Listed ".concat(O.length," item").concat(Object(Le.a)(O.length)," for sale"),rows:O,index:0,openIndex:k,isSuccessScreen:!0})}):Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(bt,{sectionTitle:"Approve ".concat(x.length," collection").concat(Object(Le.a)(x.length)),title:"COLLECTIONS",rows:x,index:1,openIndex:k}),Object(oe.jsx)(bt,{sectionTitle:"Confirm ".concat(O.length," listing").concat(Object(Le.a)(O.length)),caption:"Now you can sign to list each item",title:"NFTS",rows:O,index:2,openIndex:k})]})}),Object(oe.jsx)("hr",{className:"rgw6ez7ce rgw6ezwk rgw6ez16w rgw6ez7k6 rgw6ez7au rgw6ez50k"}),Object(oe.jsxs)(Se.c,{className:Pe.i,marginTop:"12",marginBottom:X?"8":"20",children:["Return if sold",Object(oe.jsxs)(Se.c,{className:Pe.j,marginLeft:"auto",marginRight:"0",children:[_,"\xa0ETH"]})]}),X?Object(oe.jsxs)(Te.a,{as:"span",className:Pe.f,color:"textSecondary",children:["Status:"," ",Object(oe.jsx)(Te.a,{as:"span",color:"accentSuccess",children:"Confirmed"})]}):Object(oe.jsx)(lt,{onClick:function(){Y(),E?H():q()},buttonText:"Start listing",showWarningOverride:P}),(r===$.c.PENDING||r===$.c.SIGNING)&&Object(oe.jsx)(Te.a,{as:"button",border:"none",backgroundColor:"backgroundSurface",cursor:"pointer",color:"orange",className:$e,onClick:function(){V()},type:"button",children:"Stop listing"})]})})};function jt(e){return{action:$.f.Buy,marketplace:e.marketplace.toLowerCase(),amountIn:e.price.value,assetIn:{ETHPrice:e.price.value,baseAsset:e.price.currency,basePrice:e.price.value,baseDecimals:"18"},amountOut:e.amount.toString(),assetOut:{id:e.id,decimals:18,address:e.contractAddress,priceInfo:{ETHPrice:e.price.value,baseAsset:e.price.currency,basePrice:e.price.value,baseDecimals:"18"},tokenType:e.tokenType,tokenId:e.tokenId,amount:e.amount.toString(),marketplace:e.marketplace.toLowerCase(),orderSource:"api"}}}function ft(e,t){var n=e.route?e.route.map(jt):[];return{route:n,routeResponse:{route:n,valueToSend:t?void 0:e.sendAmount.value,data:e.calldata,to:e.toAddress}}}var gt,ht,mt=n(846),xt=n(481),Ot=(n(1572),n(40)),vt=Object(l.keyframes)(gt||(gt=Object(Ot.a)(["\n  0% {\n    stroke-dashoffset: 1000;\n  }\n  100% {\n    stroke-dashoffset: 0;\n  }\n"]))),wt=l.default.circle.withConfig({componentId:"sc-5ix82i-0"})(["stroke-dasharray:1000;stroke-dashoffset:0;-webkit-animation:"," linear;animation:"," linear;animation-duration:160s;stroke:",";"],vt,vt,(function(e){return e.theme.accentAction})),It=function(){return Object(oe.jsx)(Te.a,{display:"flex",position:"absolute",children:Object(oe.jsx)("svg",{height:"18px",width:"18px",children:Object(oe.jsx)(wt,{strokeWidth:"".concat(1.5),strokeLinecap:"round",style:{transform:"rotate(90deg)",transformOrigin:"50% 50%"},fill:"transparent",r:"8px",cx:"9px",cy:"9px"})})})},kt=n(1549),yt=(n(701),n(1573),"12");!function(e){e[e.Image=0]="Image",e[e.Video=1]="Video",e[e.Audio=2]="Audio"}(ht||(ht={}));l.default.a.withConfig({componentId:"sc-1xq4e4s-0"})(["display:flex;align-items:center;flex-shrink:0;text-decoration:none;font-size:14px;font-weight:500;border:1px solid;color:",";border-color:",";padding:2px 6px;border-radius:6px;",";"],(function(e){return e.theme.accentAction}),(function(e){return e.theme.accentActionSoft}),kt.a);var At=Object(l.default)(Z.a).withConfig({componentId:"sc-1xq4e4s-1"})(["width:16px;height:16px;color:",";"],(function(e){return e.theme.accentFailure}));l.default.div.withConfig({componentId:"sc-1xq4e4s-2"})(["position:absolute;display:flex;width:100%;bottom:12px;z-index:2;justify-content:center;"]),l.default.div.withConfig({componentId:"sc-1xq4e4s-3"})(["display:flex;border:1px solid ",";border-radius:","px;overflow:hidden;"],(function(e){return e.theme.backgroundOutline}),yt),Object(l.default)(re.o.HeadlineSmall).withConfig({componentId:"sc-1xq4e4s-4"})(["display:flex;padding:6px 8px;width:60px;background:",";justify-content:center;cursor:default;"],(function(e){return e.theme.backgroundBackdrop})),l.default.div.withConfig({componentId:"sc-1xq4e4s-5"})(["display:flex;justify-content:center;align-items:center;width:40px;background:",";color:",";:hover{color:",";}"],(function(e){return e.theme.backgroundInteractive}),(function(e){return e.theme.textPrimary}),(function(e){return e.theme.accentAction})),l.default.div.withConfig({componentId:"sc-1xq4e4s-6"})(["position:absolute;top:12px;left:12px;z-index:2;"]),l.default.div.withConfig({componentId:"sc-1xq4e4s-7"})(["position:relative;pointer-events:auto;&:hover{opacity:",";}cursor:",";"],(function(e){var t=e.isDisabled,n=e.theme;return t?n.opacity.disabled:n.opacity.enabled}),(function(e){return e.isDisabled?"default":"pointer"}));Object(l.default)(Se.c).withConfig({componentId:"sc-1xq4e4s-8"})(["padding:2px;white-space:pre;text-overflow:ellipsis;display:block;overflow:hidden;flex:1;"]);var Nt=function(){return Object(oe.jsx)(y.a,{text:Object(oe.jsx)(Te.a,{className:Pe.c,children:"Blocked on OpenSea"}),placement:"top",children:Object(oe.jsx)(Te.a,{display:"flex",flexShrink:"0",marginLeft:"4",children:Object(oe.jsx)(At,{})})})},Et=(n(1574),n(160)),Tt=(n(610),n(1575),"_1kuawc1 rgw6ez2cw rgw6ez2ie rgw6ez2nk rgw6ez272 rgw6ez4dq rgw6ez3sk rgw6ez7ai rgw6ez1dq rgw6ez7c2"),St="rgw6ez14e rgw6ez1b8 rgw6ez48q rgw6ez7bu",Ct="_1kuawc7",Pt="_1kuawcb rgw6ezb2 rgw6ezcw rgw6ez7mm rgw6ez44w rgw6ez44q",Rt="rgw6ezcq rgw6ezaw rgw6eze8 rgw6ez7mm rgw6ez44q rgw6ez44w rgw6ez4dw",_t="rgw6ez3ww",zt=Object(l.default)(Be.l).withConfig({componentId:"sc-iebvtt-0"})(["border-radius:12px;font-size:14px;line-height:16px;margin-left:16px;padding:12px 14px;"]),Ft=Object(l.default)(Be.l).withConfig({componentId:"sc-iebvtt-1"})(["border-radius:12px;flex:1 1 auto;font-size:14px;padding:8px;width:50%;"]),Lt=l.default.div.withConfig({componentId:"sc-iebvtt-2"})(["position:absolute;display:block;right:-11px;top:-11px;z-index:1;transition:250ms;width:45px;height:45px;display:flex;align-items:center;justify-content:center;"]),Dt=function(e){var t=e.onClick;return Object(oe.jsx)(Lt,{onClick:t,children:Object(oe.jsx)(Ce.k,{})})},Bt=function(){return Object(oe.jsx)(Te.a,{position:"relative",background:"loadingBackground",className:St,children:Object(oe.jsxs)(Te.a,{position:"absolute",textAlign:"center",left:"1/2",top:"1/2",style:{transform:"translate3d(-50%, -50%, 0)"},color:"gray500",fontSize:"12",fontWeight:"normal",children:["Image",Object(oe.jsx)("br",{}),"not",Object(oe.jsx)("br",{}),"available"]})})},Gt=function(e){var t,n=e.asset,r=e.usdPrice,c=e.removeAsset,i=e.showRemove,a=e.grayscale,s=e.isMobile,l=Object(D.useState)(!1),u=Object(o.a)(l,2),d=u[0],b=u[1],p=Object(D.useState)(!n.smallImageUrl),j=Object(o.a)(p,2),f=j[0],g=j[1],h=Object(D.useState)(!1),x=Object(o.a)(h,2),O=x[0],v=x[1],w=Object(D.useCallback)((function(){return v(!0)}),[]),I=Object(D.useCallback)((function(){return v(!1)}),[]),k=Boolean(i&&O&&!s),y=n.updatedPriceInfo?n.updatedPriceInfo.ETHPrice:n.priceInfo.ETHPrice,A=Object(K.l)(y),N=Object(K.e)(r?parseFloat(Object(m.formatEther)(y))*r:r,!0),E=Object(D.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),c([n])}),[n,c]);return Object(oe.jsx)(Et.b,{to:Object(K.n)(n),style:{textDecoration:"none"},children:Object(oe.jsxs)(Se.c,{className:Tt,onMouseEnter:w,onMouseLeave:I,children:[Object(oe.jsxs)(Te.a,{position:"relative",display:"flex",children:[i&&s&&Object(oe.jsx)(Dt,{onClick:E}),!f&&Object(oe.jsx)(Te.a,{as:"img",src:n.smallImageUrl,alt:n.name,className:Object(ut.default)(St,a&&!O&&Ct),onLoad:function(){b(!0)},onError:function(){g(!0)},visibility:d?"visible":"hidden"}),!d&&Object(oe.jsx)(Te.a,{position:"absolute",className:"".concat(St," ").concat("_2kdvfw1")}),f&&Object(oe.jsx)(Bt,{})]}),Object(oe.jsxs)(Se.b,{overflow:"hidden",width:"full",color:a?"textSecondary":"textPrimary",children:[Object(oe.jsxs)(Se.c,{overflow:"hidden",width:"full",whiteSpace:"nowrap",children:[Object(oe.jsx)(Te.a,{className:Pt,children:null!==(t=n.name)&&void 0!==t?t:"#".concat(n.tokenId)}),n.susFlag&&Object(oe.jsx)(Nt,{})]}),Object(oe.jsxs)(Se.c,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[Object(oe.jsx)(Te.a,{className:Rt,children:n.collectionName}),n.collectionIsVerified&&Object(oe.jsx)(Ce.B,{className:_t})]})]}),k&&Object(oe.jsx)(zt,{onClick:E,emphasis:Be.c.medium,size:Be.j.medium,children:"Remove"}),(!k||s)&&Object(oe.jsxs)(Se.b,{flexShrink:"0",alignItems:"flex-end",children:[Object(oe.jsxs)(Te.a,{className:"_1kuawc9 rgw6ez3rw rgw6ezb2 rgw6ezd2 rgw6ez3ww",children:[A,"\xa0ETH"]}),Object(oe.jsx)(Te.a,{className:Rt,children:N})]})]})})},Mt=function(e){var t,n=e.asset,r=e.usdPrice,c=e.markAssetAsReviewed,i=e.top,a=e.isMobile,o=u.a.from(null===(t=n.updatedPriceInfo)||void 0===t?void 0:t.ETHPrice).gt(u.a.from(n.priceInfo.ETHPrice)),s=Object(D.useCallback)((function(e){e.preventDefault(),e.stopPropagation();c(n,!1)}),[n,c]),l=Object(D.useCallback)((function(e){e.preventDefault(),e.stopPropagation();c(n,!0)}),[n,c]);return Object(oe.jsxs)(Se.b,{className:"rgw6ez2o8 rgw6ez27q rgw6ezlk rgw6ezr2 rgw6ez4rw rgw6ez3s8 rgw6ez4dq rgw6ez7au rgw6ez7ka rgw6ez53q rgw6ez5ok rgw6ez1dq rgw6ez7ai",borderTopColor:i?"backgroundOutline":"transparent",children:[Object(oe.jsxs)(Se.c,{className:"rgw6ezcq rgw6ezaw rgw6eze8 rgw6ez4be rgw6ez3rw",children:[o?Object(oe.jsx)(Ce.x,{}):Object(oe.jsx)(Ce.w,{}),Object(oe.jsx)(Te.a,{children:"Price ".concat(o?"increased":"decreased"," from ").concat(Object(K.l)(n.priceInfo.ETHPrice)," ETH")})]}),Object(oe.jsx)(Te.a,{style:{marginLeft:"-8px",marginRight:"-8px"},children:Object(oe.jsx)(Gt,{asset:n,usdPrice:r,removeAsset:function(){},isMobile:a})}),Object(oe.jsxs)(Se.c,{gap:"8",justifyContent:"space-between",children:[Object(oe.jsx)(Ft,{onClick:s,emphasis:Be.c.medium,size:Be.j.small,children:"Remove"}),Object(oe.jsx)(Ft,{onClick:l,emphasis:Be.c.high,size:Be.j.small,children:"Keep"})]})]})},Ut=function(e){var t=e.assets;return Object(oe.jsx)(Se.b,{display:"grid",style:{gridTemplateColumns:"repeat(".concat(t.length,", 20px)"),width:"".concat(32+20*(t.length-1),"px")},children:t.map((function(e,t){return Object(oe.jsx)(Te.a,{as:"img",src:e.smallImageUrl,width:"32",height:"32",borderStyle:"solid",borderWidth:"1px",borderColor:"backgroundSurface",borderRadius:"4",style:{zIndex:t},className:Ct},"".concat(e.address,"-").concat(e.tokenId))}))})},Wt=function(e){var t=e.assets,n=e.usdPrice,r=e.clearUnavailableAssets,c=e.didOpenUnavailableAssets,i=e.setDidOpenUnavailableAssets,a=e.isMobile,s=Object(D.useReducer)((function(e){return!e}),!1),l=Object(o.a)(s,2),u=l[0],d=l[1],b=Object(D.useState)(8),p=Object(o.a)(b,2),j=p[0],f=p[1];if(Object(D.useEffect)((function(){if(j){var e=setInterval((function(){f(j-1)}),1e3);return function(){return clearInterval(e)}}c||(r(),i(!1))}),[j,r,c,i]),!t||0===t.length)return null;var g=t.length>1,h=u||!g;return Object(oe.jsx)(Se.b,{className:"rgw6ez2o8 rgw6ez27q rgw6ezlk rgw6ezr2 rgw6ez4rw rgw6ez3sk rgw6ez4dq rgw6ez7au rgw6ez7ka rgw6ez53q rgw6ez60k rgw6ez5ok rgw6ez1dq",children:Object(oe.jsxs)(Se.b,{children:[Object(oe.jsxs)(Se.c,{justifyContent:"space-between",marginBottom:h?"12":"0",cursor:g?"pointer":"default",onClick:function(){g&&(!c&&i(!0),d())},children:[Object(oe.jsxs)(Se.c,{gap:"12",color:"textSecondary",className:Pe.c,children:[!h&&Object(oe.jsx)(Ut,{assets:t.slice(0,5)}),"No longer available"]}),g&&Object(oe.jsx)(Se.c,{color:"textSecondary",children:u?Object(oe.jsx)(Ce.i,{}):Object(oe.jsx)(Ce.f,{})}),!c&&Object(oe.jsxs)(Se.c,{position:"relative",width:"20",height:"20",color:"textPrimary",justifyContent:"center",cursor:"pointer",onClick:r,children:[Object(oe.jsx)(It,{}),Object(oe.jsx)(Ce.l,{})]})]}),Object(oe.jsx)(Se.b,{gap:"8",style:{marginLeft:"-8px",marginRight:"-8px"},children:h&&t.map((function(e){return Object(oe.jsx)(Gt,{asset:e,usdPrice:n,removeAsset:function(){},grayscale:!0,isMobile:a},e.id)}))})]})})},qt=function(){var e=Object(_e.a)((function(e){return e.bagStatus})),t=Object(_e.a)((function(e){return e.setBagStatus})),n=Object(_e.a)((function(e){return e.markAssetAsReviewed})),r=Object(_e.a)((function(e){return e.didOpenUnavailableAssets})),c=Object(_e.a)((function(e){return e.setDidOpenUnavailableAssets})),i=Object(_e.a)((function(e){return e.itemsInBag})),a=Object(_e.a)((function(e){return e.setItemsInBag})),o=Object(_e.a)((function(e){return e.removeAssetsFromBag})),l=Object(_e.b)(),u=Object(D.useMemo)((function(){return Object(K.w)(i)}),[i]),p=Object(xt.useQuery)(["fetchPrice",{}],(function(){return Object(K.g)()}),{}).data,j=Object(D.useMemo)((function(){return{unchangedAssets:u.filter((function(e){return e.status===$.a.ADDED_TO_BAG||e.status===$.a.REVIEWED})).map((function(e){return e.asset})),priceChangedAssets:u.filter((function(e){return e.status===$.a.REVIEWING_PRICE_CHANGE})).map((function(e){return e.asset})),unavailableAssets:u.filter((function(e){return e.status===$.a.UNAVAILABLE})).map((function(e){return e.asset})),availableItems:u.filter((function(e){return e.status!==$.a.UNAVAILABLE}))}}),[u]),f=j.unchangedAssets,g=j.priceChangedAssets,h=j.unavailableAssets,m=j.availableItems;return Object(D.useEffect)((function(){var n=g.length>0,r=u.length>0;n&&Object(d.sendAnalyticsEvent)(b.NFTEventName.NFT_BUY_BAG_CHANGED,Object(s.a)({usd_value:p,bag_quantity:u},Object(K.h)(g))),e!==$.b.IN_REVIEW||n||t(r?$.b.CONFIRM_REVIEW:$.b.ADDING_TO_BAG),e!==$.b.CONFIRM_REVIEW||r||t($.b.ADDING_TO_BAG)}),[e,u,g,t,p]),Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsxs)(Se.b,{display:g.length>0||h.length>0?"flex":"none",children:[h.length>0&&Object(oe.jsx)(d.Trace,{name:b.NFTEventName.NFT_BUY_BAG_CHANGED,properties:Object(s.a)({usd_value:p,bag_quantity:u.length},Object(K.h)(h)),shouldLogImpression:!0,children:Object(oe.jsx)(Wt,{assets:h,usdPrice:p,clearUnavailableAssets:function(){return a(m)},didOpenUnavailableAssets:r,setDidOpenUnavailableAssets:c,isMobile:l})}),g.map((function(e,t){return Object(oe.jsx)(Mt,{asset:e,usdPrice:p,markAssetAsReviewed:n,top:0===t&&0===h.length,isMobile:l},e.id)}))]}),Object(oe.jsx)(Se.b,{children:f.slice(0).reverse().map((function(e){return Object(oe.jsx)(Gt,{asset:e,usdPrice:p,removeAsset:o,showRemove:!0,isMobile:l},e.id)}))})]})},Ht=Object(l.default)(re.b).withConfig({componentId:"sc-bq6y8h-0"})(["color:",";cursor:pointer;font-weight:600;font-size:14px;line-height:16px;:active{text-decoration:none;}"],(function(e){return e.theme.textSecondary})),Vt=l.default.button.withConfig({componentId:"sc-bq6y8h-1"})(["align-items:center;background-color:transparent;border-radius:8px;border:none;color:",";cursor:pointer;display:flex;flex-direction:row;justify-content:flex-end;margin-left:auto;padding:2px;opacity:1;",""],(function(e){return e.theme.textPrimary}),kt.a),Yt=l.default.div.withConfig({componentId:"sc-bq6y8h-2"})(["align-items:center;background-color:",";border-radius:100px;font-weight:bold;color:",";display:flex;font-size:10px;justify-content:center;min-width:",";min-height:",";padding:4px 6px;"],(function(e){return e.theme.accentAction}),(function(e){return e.theme.accentTextLightPrimary}),(function(e){return e.sizing}),(function(e){return e.sizing})),Xt=l.default.div.withConfig({componentId:"sc-bq6y8h-3"})(["align-items:center;display:flex;flex-direction:row;gap:8px;justify-content:flex-start;margin:16px 28px;text-align:center;"]),Jt=function(e){var t=e.numberOfAssets,n=e.closeBag,r=e.resetFlow,c=e.isProfilePage,i=Object(D.useMemo)((function(){return function(e){var t=e.toString().length;return"".concat(14+6*t,"px")}(t)}),[t]);return Object(oe.jsxs)(Xt,{children:[Object(oe.jsx)(re.o.HeadlineSmall,{children:c?Object(oe.jsx)(oe.Fragment,{children:"Sell"}):Object(oe.jsx)(oe.Fragment,{children:"Bag"})}),t>0&&Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(Yt,{sizing:i,children:t}),Object(oe.jsx)(Ht,{onClick:r,children:Object(oe.jsx)(oe.Fragment,{children:"Clear all"})})]}),Object(oe.jsx)(Vt,{onClick:n,children:Object(oe.jsx)(Ce.c,{"data-testid":"nft-bag-close-icon"})})]})},Qt=Object(l.default)(Se.b).withConfig({componentId:"sc-xhr1rt-0"})(["gap:12px;margin-top:68px;"]),$t=function(){var e=Object(g.c)();return Object(oe.jsxs)(Qt,{children:[Object(oe.jsx)(Se.a,{children:e?Object(oe.jsx)(Ce.n,{color:Re.b.colors.textTertiary}):Object(oe.jsx)(Ce.d,{color:Re.b.colors.textTertiary,height:"96px",width:"96px",strokeWidth:"1px"})}),e?Object(oe.jsx)(Se.a,{"data-testid":"nft-no-nfts-selected",className:Pe.i,children:"No NFTs selected"}):Object(oe.jsxs)(Se.b,{gap:"16",children:[Object(oe.jsx)(Se.a,{"data-testid":"nft-empty-bag",className:Pe.i,style:{lineHeight:"24px"},children:"Your bag is empty"}),Object(oe.jsx)(Se.a,{fontSize:"12",fontWeight:"normal",color:"textSecondary",style:{lineHeight:"16px"},children:"Selected NFTs will appear here"})]})]})},Kt=function(e){var t=e.asset,n=Object(_e.e)((function(e){return e.removeSellAsset})),r=Object(_e.b)(),c=Object(D.useState)(!1),i=Object(o.a)(c,2),a=i[0],s=i[1],l=function(){return s(!a)},u=function(e){e.preventDefault(),e.stopPropagation(),n(t)};return Object(oe.jsxs)(Se.c,{className:Tt,onMouseEnter:l,onMouseLeave:l,children:[Object(oe.jsxs)(Te.a,{position:"relative",display:"flex",children:[r&&Object(oe.jsx)(Dt,{onClick:u}),Object(oe.jsx)("img",{src:t.smallImageUrl,alt:t.name,className:St})]}),Object(oe.jsxs)(Se.b,{overflow:"hidden",width:"full",color:"textPrimary",children:[Object(oe.jsx)(Se.c,{overflow:"hidden",width:"full",justifyContent:"space-between",whiteSpace:"nowrap",gap:"16",children:Object(oe.jsx)(Te.a,{className:Pt,children:t.name||"#".concat(t.tokenId)})}),Object(oe.jsxs)(Se.c,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[Object(oe.jsx)(Te.a,{className:Rt,children:t.asset_contract.name}),t.collectionIsVerified&&Object(oe.jsx)(Ce.B,{className:_t})]})]}),a&&!r&&Object(oe.jsx)(zt,{onClick:u,emphasis:Be.c.medium,size:Be.j.medium,children:"Remove"})]})},Zt=function(){var e=Object(_e.e)((function(e){return e.sellAssets}));return Object(oe.jsx)(Se.b,{children:e.length?e.map((function(e,t){return Object(oe.jsx)(Kt,{asset:e},t)})):null})},en=320,tn=360,nn=l.default.div.withConfig({componentId:"sc-1cpp7nx-0"})(["position:fixed;display:flex;flex-direction:column;top:88px;right:20px;width:","px;height:calc(100vh - 108px);background:",";border:1px solid ",";border-radius:16px;box-shadow:",";z-index:",";@media only screen and (max-width:","){right:0px;top:0px;width:100%;height:100%;border-radius:0px;border:none;}@media only screen and (min-width:","){width:","px;}"],en,(function(e){return e.theme.backgroundSurface}),(function(e){return e.theme.backgroundOutline}),(function(e){return e.theme.shallowShadow}),(function(e){var t=e.raiseZIndex,n=e.isProfilePage;return t?n?We.a.modalOverTooltip:We.a.modalBackdrop-1:3}),(function(e){var t=e.theme;return"".concat(t.breakpoint.sm,"px")}),(function(e){var t=e.theme;return"".concat(t.breakpoint.xxxl,"px")}),tn),rn=l.default.div.withConfig({componentId:"sc-1cpp7nx-1"})(["position:fixed;background:rgba(0,0,0,0.7);top:0px;width:100%;height:100%;"]),cn=function(e){var t=e.top,n=e.show;return Object(oe.jsx)(Te.a,{marginX:"24",borderWidth:"1px",borderStyle:"solid",borderColor:"transparent",borderTopColor:t?"transparent":"backgroundOutline",borderBottomColor:t?"backgroundOutline":"transparent",opacity:n?"1":"0",transition:"250"})};t.default=function(){var e=Object(p.useWeb3React)(),t=e.account,n=e.provider,c=Object(_e.e)((function(e){return{resetSellAssets:e.reset,sellAssets:e.sellAssets}}),ae.a),l=c.resetSellAssets,h=c.sellAssets,m=Object(_e.d)((function(e){var t=e.setProfilePageState;return{profilePageState:e.state,setProfilePageState:t}}),ae.a),x=m.profilePageState,O=m.setProfilePageState,v=Object(_e.a)((function(e){return Object(s.a)(Object(s.a)({},e),{},{bagIsLocked:e.isLocked,uncheckedItemsInBag:e.itemsInBag})}),ae.a),w=v.bagStatus,I=v.setBagStatus,k=v.didOpenUnavailableAssets,y=v.setDidOpenUnavailableAssets,A=v.bagIsLocked,N=v.setLocked,E=v.reset,T=v.setItemsInBag,S=v.bagExpanded,C=v.toggleBag,P=v.setTotalEthPrice,R=v.setBagExpanded,_=Object(_e.a)((function(e){return{uncheckedItemsInBag:e.itemsInBag}})).uncheckedItemsInBag,z=Object(g.c)(),F=Object(g.a)(),L=Object(g.b)(),B=Object(_e.b)(),G=Object(j.d)(j.b.gqlRouting,j.a.Enabled)===j.a.Enabled,M=Object(_e.f)((function(e){return e.sendTransaction})),U=Object(_e.f)((function(e){return e.state})),W=Object(_e.f)((function(e){return e.setState})),q=Object(D.useRef)(U),V=Object(_e.g)((function(e){return[e.setTransactionResponse]})),Y=Object(o.a)(V,1)[0],X=H((function(e){return e.tokenTradeInput})),J=Object(xt.useQueryClient)(),Q=Object(D.useMemo)((function(){return Object(K.w)(_)}),[_]),Z=Object(D.useState)(!1),ee=Object(o.a)(Z,2),te=ee[0],ne=ee[1],re=Object(D.useState)(!1),ce=Object(o.a)(re,2),ie=ce[0],se=ce[1],le=Object(D.useState)(0),ue=Object(o.a)(le,2),de=ue[0],be=ue[1],pe=Object(D.useMemo)((function(){return{totalEthPrice:Q.reduce((function(e,t){return t.status!==$.a.UNAVAILABLE?e.add(u.a.from(t.asset.updatedPriceInfo?t.asset.updatedPriceInfo.ETHPrice:t.asset.priceInfo.ETHPrice)):e}),u.a.from(0))}}),[Q]).totalEthPrice,je=function(){var e=Object(a.a)(i.a.mark((function e(t,r){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,M(null===n||void 0===n?void 0:n.getSigner(),Q.filter((function(e){return e.status!==$.a.UNAVAILABLE})).map((function(e){return e.asset})),t,r);case 4:!(c=e.sent)||q.current!==$.g.Success&&q.current!==$.g.Failed||(N(!1),ne(!1),Y(c),R({bagExpanded:!1}),E());case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fe=Object(D.useCallback)((function(){R({bagExpanded:!1,manualClose:!0})}),[R]),ge=Object(f.d)(),he=Object(o.a)(ge,1)[0],me=function(){var e=Object(a.a)(i.a.mark((function e(){var n,c,a,o,s,l,d,b,p,j,f,g,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Q.filter((function(e){return e.status!==$.a.UNAVAILABLE})).map((function(e){return e.asset})),c=Object(K.c)(n.reduce((function(e,t){return e.add(u.a.from(t.priceInfo.ETHPrice))}),u.a.from(0)).toString()),k&&y(!1),!A&&N(!0),I($.b.FETCHING_ROUTE),e.prev=5,!G){e.next=10;break}he({variables:{senderAddress:G&&t?t:"",nftTrades:G?Object(K.b)(Q):[],tokenTrades:X||void 0},onCompleted:function(e){if(!e.nftRoute||!e.nftRoute.route)return I($.b.ADDING_TO_BAG),void N(!1);var t=!!X,c=ft(e.nftRoute,t),i=c.route,a=c.routeResponse,o=Object(mt.a)(n,i),s=o.hasPriceAdjustment,l=o.updatedAssets,u=s&&t,d=l.filter((function(e){return e.updatedPriceInfo})).sort(K.x),b=l.filter((function(e){return e.isUnavailable})),p=l.filter((function(e){return!e.updatedPriceInfo&&!e.isUnavailable})),j=p.length>0,f=d.length>0,g=b.length>0,h=j||f||g,m=f||g;T([].concat(Object(r.a)(b.map((function(e){return{asset:e,status:$.a.UNAVAILABLE}}))),Object(r.a)(d.map((function(e){return{asset:e,status:$.a.REVIEWING_PRICE_CHANGE}}))),Object(r.a)(p.map((function(e){return{asset:e,status:$.a.REVIEWED}})))));var x=!1;h?m?I(f?$.b.IN_REVIEW:$.b.CONFIRM_REVIEW):u?I($.b.CONFIRM_QUOTE):(je(a,t),I($.b.CONFIRMING_IN_WALLET),x=!0):I($.b.ADDING_TO_BAG),N(x)}}),e.next=25;break;case 10:return e.next=12,J.fetchQuery(["assetsRoute",c,n,t],(function(){return Object(ze.e)({toSell:[c],toBuy:n,senderAddress:null!==t&&void 0!==t?t:""})}));case 12:a=e.sent,o=Object(mt.a)(n,a.route),s=o.updatedAssets,l=s.filter((function(e){return e.updatedPriceInfo})).sort(K.x),d=s.filter((function(e){return e.isUnavailable})),b=s.filter((function(e){return!e.updatedPriceInfo&&!e.isUnavailable})),p=b.length>0,j=l.length>0,f=d.length>0,g=p||j||f,h=j||f,T([].concat(Object(r.a)(d.map((function(e){return{asset:e,status:$.a.UNAVAILABLE}}))),Object(r.a)(l.map((function(e){return{asset:e,status:$.a.REVIEWING_PRICE_CHANGE}}))),Object(r.a)(b.map((function(e){return{asset:e,status:$.a.REVIEWED}}))))),N(!1),g?h?I(j?$.b.IN_REVIEW:$.b.CONFIRM_REVIEW):(je(a,!1),I($.b.CONFIRMING_IN_WALLET)):I($.b.ADDING_TO_BAG);case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(5),I($.b.ADDING_TO_BAG);case 30:case"end":return e.stop()}}),e,null,[[5,27]])})));return function(){return e.apply(this,arguments)}}();Object(D.useEffect)((function(){_e.f.subscribe((function(e){return q.current=e.state}))}),[]),Object(D.useEffect)((function(){A&&!te&&ne(!0)}),[A,te]),Object(D.useEffect)((function(){q.current===$.g.Confirming&&I($.b.PROCESSING_TRANSACTION),q.current!==$.g.Denied&&q.current!==$.g.Invalid||(q.current===$.g.Invalid?I($.b.WARNING):I($.b.CONFIRM_REVIEW),W($.g.New),N(!1),ne(!1))}),[q.current]),Object(D.useEffect)((function(){P(pe)}),[pe,P]);var xe=Q.length>0,Oe=Q.length>0,ve=h.length>0,we=Boolean(!z&&!Oe&&w===$.b.ADDING_TO_BAG||z&&!ve),Ie=Object(D.useMemo)((function(){return Object(s.a)({},Object(K.h)(Q.map((function(e){return e.asset}))))}),[Q]);return S&&L?Object(oe.jsxs)(Ge.a,{children:[Object(oe.jsx)(nn,{"data-testid":"nft-bag",raiseZIndex:B||te,isProfilePage:z,children:z&&x===$.e.LISTING?Object(oe.jsx)(pt,{}):Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(Jt,{numberOfAssets:z?h.length:Q.length,closeBag:fe,resetFlow:z?l:E,isProfilePage:z}),we&&Object(oe.jsx)($t,{}),Object(oe.jsx)(cn,{top:!0,show:ie&&de>0}),Object(oe.jsx)(Se.b,{ref:function(e){if(null!==e){var t=e.scrollHeight>e.clientHeight;t!==ie&&se(t)}},className:"_1jcz50r1 rgw6ez2dk rgw6ez2j2 rgw6ez1y8 rgw6ez7ny",onScroll:function(e){var t=e.currentTarget.scrollTop,n=e.currentTarget.clientHeight,r=e.currentTarget.scrollHeight;be(t?(t+n)/r*100:0)},gap:"12",children:z?Object(oe.jsx)(Zt,{}):Object(oe.jsx)(qt,{})}),xe&&!z&&Object(oe.jsx)(Ee,{totalEthPrice:pe,fetchAssets:me,eventProperties:Ie}),ve&&z&&Object(oe.jsx)(Te.a,{marginTop:"32",marginX:"28",marginBottom:"16",paddingY:"10",className:"".concat(Pe.d," ").concat(Pe.g),backgroundColor:"accentAction",color:"white",textAlign:"center",onClick:function(){C(),O($.e.LISTING),Object(d.sendAnalyticsEvent)(b.NFTEventName.NFT_PROFILE_PAGE_START_SELL,{list_quantity:h.length,collection_addresses:h.map((function(e){return e.asset_contract.address})),token_ids:h.map((function(e){return e.tokenId}))})},children:"Continue"})]})}),F?Object(oe.jsx)(rn,{onClick:C}):te&&Object(oe.jsx)(Me.a,{onClick:function(){return A?void 0:ne(!1)}})]}):null}}}]);
//# sourceMappingURL=5.b124149f.chunk.js.map